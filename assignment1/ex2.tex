\section{Exercise 2: An application of MCFP: rectilinear planar embedding}

\subsection{Exercise 2.1}
\todo[inline]{Table description should be better. Also the reference can't find
  the correct number.}

The $x_{vf}$ values for all vertices and and faces of \cite[Figure
3]{assignment1} can be found in Table \ref{table:xvf}.

\begin{table}[h]
\centering
\begin{tabular}{l|lllll}
$x_{vf}$ & $a$ & $b$ & $c$ & $d$ & $e$ \\ \hline
$v_1$   & 0   & 1   & 1   & 0   & 0   \\
$v_2$   & 0   & 0   & 1   & 1   & 0   \\
$v_3$   & 1   & 0   & 1   & 1   & 1   \\
$v_4$   & 0   & 0   & 0   & -1  & 1   \\
$v_5$   & 1   & 0   & 0   & 0   & -1  \\
$v_6$   & 1   & 1   & 0   & 1   & 1   \\
$v_7$   & 0   & 0   & 0   & 0   & 0
\end{tabular}
\caption{$x_{vf}$-values for all vertex/face combinations.}
\label{table:xvf}
\end{table}

The $z_{fg}$ values for the same graph can be found in Table \ref{table:zfg}.

\begin{table}[h]
\centering
\begin{tabular}{l|lllll}
$z_{fg}$ & $a$ & $b$ & $c$ & $d$ & $e$ \\ \hline
$a$     &    & 0   & 0   &  0  & 0   \\
$b$     & 2   &    & 1   & 1   & 0   \\
$c$     & 1   & 1   &    & 0   & 0   \\
$d$     & 0   & 1   & 0   &    & 2   \\
$e$     & 4   & 0   & 0   & 0   & 
\end{tabular}
\caption{$z_{fg}$ values for all faces, values for empty sets are not displayed}
\label{table:zfg}
\end{table}

\todo[inline]{This is the sum of the previous table (zfg), can we create a
  pretty sum.}
Furthermore, there is a total of $13$ breakpoints in the graph.

A drawing of a rectilinear layout for \cite[Figure 2]{assignment1} can be seen
in Figure \ref{fig:rect}.

\graphicc{0.4}{img/2_1_1.png}{Graph in rectilinear form.}{fig:rect}

\todo[inline]{Make the figure work in tikz, else this will have to suffice.}
% \begin{figure}
% \begin{tikzpicture}[-,>=stealth',shorten >=1pt,auto,node distance=1.3cm,
%                     semithick]
%   \tikzstyle{every state}=[fill=white,text=black]

%   \node[state] (1) {$v_1$};
%   \node[state] (6) [below of=1]{$v_6$};
%   \node[state] (2) [left of=6]{$v_2$};
%   \node[state] (3) [below of=2]{$v_3$};
%   \node[state] (4) [right of=6]{$v_4$};
%   \node[state] (5) [left of=2]{$v_5$};

% \path (1) edge (6)
%       (1) edge (2)
%       (1) edge (5)
%       (1) edge (4)

%       (2) edge (5)
%       (2) edge (6)

%       (3) edge (5)
%       (3) edge (2)
%       (3) edge (6)
%       (3) edge (4)

%       (4) edge (5)

%       (6) edge (4);
% \end{tikzpicture}
% \caption{Rectilinear layour of the figure.}
% \label{fig:rect}
% \end{figure}
%\begin{tikzpicture}[node distance = 3cm, auto]
    % Place nodes
    % \node [v1] (init) {n};
    % \node [blank, below of=init] (sup) {};
    % \node [decision, below of=sup] (square) {$n^2 \le 1$};
    % \node [cloud, right of=square] (end) {End};
    % \node [block, left of=square] (newN) {$n = \frac{2}{n}$};

    % Draw edges
    % \path [line] (init) -- (square);
    % \path [line] (square) -- node [near start] {yes} (end);
    % \path [line] (square) -- node [near start] {no} (newN);
    % \path [line] (newN) |- (sup);
% \end{tikzpicture}


\subsection{Exercise 2.2}

Let $B$ be the set of all boundary cycles and $f_e$ 
the external boundary cycle. In the following, we make use of the fact that given two
boundary cycles $x$ and $y$, inner turns from x to y ($z_{xy}$) will be outer
turns from y to x ($z_{yx}$). We do not verify the truth of this statement.
The constraints can be expressed as:
%%
\begin{align}
  \forall f \in B\setminus \{f_e\} : & \sum_{v} x_{vf} + \sum_{b\in B\setminus \{f\}} z_{fb} - z_{bf} &= 4 
    \label{c:internal} \\
  & \sum_{v} x_{v f_e} + \sum_{b\in B\setminus \{f_e\}} z_{f_e b} - z_{b f_e} &= -4
    \label{c:external}
\end{align}
%%
Boundary cycle $a$ is the external boundary cycle, so Eq~\ref{c:external} must hold for $a$:
\begin{align*}
  &   \sum_{v} x_{v a} + \sum_{b\in B\setminus \{a\}} z_{a b} - z_{b a} \\
  &=  3 + z_{ab} - z_{ba} + z_{ac} - z_{ca} + z_{ad} - z_{da} + z_{ae} - z_{ea} \\
  &=  3 + 0 - 2 + 0 - 1 + 0 - 0 + 0 - 4 \\
  &=  3 - 2 - 1 - 4 = -4
\end{align*}
%%
Boundary cycle $e$ is an internal boundary cycle, so Eq~\ref{c:internal} must hold for $e$ specifically:
\begin{align*}
  & \sum_{v} x_{vf} + \sum_{b\in B\setminus f} z_{fb} - z_{bf} \\
  &= 2 + z_{ea} - z_{ae} + z_{eb} - z_{be} + z_{ec} - z_{ce} + z_{ed} - z_{de} \\
  &= 2 + 4 - 0 + 0 - 0 + 0 - 0 + 0 - 2 \\
  &= 2 + 4 - 2 = 4
\end{align*}
%%%
\subsection{Exercise 2.3}

The assumption is necesarry since only 4 edges can be connected to any single
node, when the edges are limited to moving in two directions. From each node, an
edge can go either up or down, or left or right.


To show that Equation 1 from \cite{assignment1} holds true we will divide it
into the three different cases and show them seperetly.
\begin{itemize}
\item $\sum_f x_{vf} = 0$ if $v$ has degree 2 \\
  Any vertex $v$ of degree 2 have 2 edges. This means that $v$ is part of
  exactly 2 boundary cycles, lets call them $f$ and $g$. This means that our sum
  can be defined as
  \[
    \sum_f x_{vf} = x_{vf} + x_{vg}.
  \]
  Since $v$ is of second degree, there is only two possible ``kinds'' of
  configurations of the edges, either they form a 180 degree angle, or they form
  a 90 and a 270 degree angle.  In the case of the 180 degree angles we have
  $x_{vf} = x_{vg} = 0$. The last case is the $90/260$ degree case, this menas
  one of them will be an innerturn and one will be an outer turn. Because of
  this one cycle must have an $x$ value of $1$ and the other must have an $x$
  value of $-1$ giving a summation of 0, proving the initial statement..
\item $\sum_f x_{vf} = 2$ if $v$ has degree 3 \\
  Having a degree of 3 means that the edge configuratin can be only one way, 2
  edges will go either vertical or horizontal while the last edge is
  perpendicular to those. This configuration leaves 2 inner turns, and no outer
  turns. Naming the cycles $f, g$ and $h$ where $f$ and $g$ form inner turns
  with $v$, the sum can be written and calculated like this
  \[
    \sum_f x_{vf} = x_{vf} + x_{vg} + x_{vh} = 1 + 1 + 0 = 2
  \]
  which shows the second part of the initial sum is true.

\item $\sum_f x_{vf} = 4$ if $v$ has degree 4 \\
  If $v$ is uf degree 4, there is exactly 4 edges connected to $v$ and $v$ must
  be part of 4 cycles. In order to have space for these 4 edges all edges must
  be inner turns, the sum can then be written out as so
  \[
    \sum_f x_{vf} = 1 + 1 + 1 + 1 = 4
  \]
\end{itemize}
%
This hows that Equation 1 from \cite{assignment1} holds in all three cases for
all vertices.
%
\subsection{Exercise 2.4}
%
The objective function $\sum_{f\in B} \sum_{g\in B\setminus\{f\}} z_{fg} + z_{gf}$
expresses the total number of breakpoints, which we wish to minimize.

\begin{align*}
  \text{minimize} \quad & \sum_{f\in B} \sum_{g\in B\setminus\{f\}} z_{fg} + z_{gf} &  \\
  \text{subject to} \quad & & \\
  & \forall f \in B\setminus \{f_e\} : \sum_{v} x_{vf} + \sum_{b\in B\setminus \{f\}} z_{fb} - z_{bf} &= 4 \\
  & \sum_{v} x_{v f_e} + \sum_{b\in B\setminus \{f_e\}} z_{f_e b} - z_{b f_e} &= -4 \\
  & \sum_{u\in V} \sum_{g} x_{ug} \ \textit{mod} \ 2 & = 0 \\
  & \sum_{u\in V} \sum_{g} x_{ug} & \geq 0 \\
  & \sum_{u\in V} \sum_{g} x_{ug} & \leq 4 \\
  & z_{fg}, z_{gf} & \geq 0
\end{align*} 
%
where the sum $\sum_{g}$ is over all boundary cycles $g$ containing vertex $u$.
%
\subsection{Exercise 2.5}
