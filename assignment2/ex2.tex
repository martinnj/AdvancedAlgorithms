\section{Bottom-$k$ sampling}

\subsection{Exercise 2}

\subsection{Exercise 3(a)}
We would store the buttom-$k$ samples in a minimum heap structure $H$, sorted by
their hashing value. This way we can insert new entries in $O(\text{lg } n)$,
and retrieve the $S^{k}_{h}(H)$ lowest hash values in $O(k \text{ lg } n)$ where
$n$ is the total number of input values.

\subsection{Exercise 3(b)}
As written above we would be able to process/insert the next key in $O(\text{lg
} n)$ time.

\subsection{Exercise 4(a)}
We will prove the equality $S^{k}_{h}(\text{A} \cup \text{B}) =
S^{k}_{h}(S^{k}_{h}(A) \cup S^{k}_{h}(B))$.
%
We can see each set as a sorted stack that keeps the smallest values at the
top. The left hand part of the equality ($S^{k}_{h}(\text{A} \cup \text{B}))$)
corresponds to merging the two stacks and taking the $k$ top values.
%
The right hand side ($S^{k}_{h}(S^{k}_{h}(A) \cup S^{k}_{h}(B))$) corresponds to
taking the $k$ topmost values from both stacks and then merging them and taking
the $k$ smallest values from the resulting stack.

Since we take the $k$ smallest values from each stack we are guaranteed to have
the smallest value from the union of $A$ and $B$ since even if the smallest
values in $B$ is bigger than the biggest values in $A$ we still have the $k$
smallest values from $A$, thus proving the equality.

\subsection{Exercise 4(b)}
% Left side of the equality is basically taking the k smallest values from the
% union and only keeping those that appear in both sets.

% Right side of the equality is basically taking the k smallest values from the
% union and only keeping those that are part of the k-smallest in both sets.

We want to prove the equality $A \cap B \cap S^{k}_{h}(A \cup B) = S^{k}_{h}(A)
\cap S^{k}_{h}(B) \cap S^{k}_{h}(A \cup B)$.

%We see trivially that $S^{k}_{h}(A) = S^{k}_{h}(A)$. We also easily see that
%$S^{k}_{h}(A) \cap S^{k}_{h}(B) \subseteq A \cap B$

\subsection{Exercise 4(c)}